@BASE = http://localhost:8080

@JWT = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWlkNGVnYjIwMDA1MHkwd2FkNTh6Z29yIiwibG9naW5JZCI6Im1pbmciLCJ0eXBlIjoiYWNjZXNzIiwianRpIjoiYzUwYjBiNGMtMWE2Yy00YzY2LWJkMjMtN2M0OGUxYzkzYjRmIiwiaWF0IjoxNzYzOTk4MDk2LCJleHAiOjE3NjM5OTg5OTZ9.wHTA2gFavlAjIO2FGsGT2boql5njUZSobme7QwqaO0A

@ACCESS = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWlkNGg5dnkwMDAwcGg0OG1jZmU0cnIyIiwibG9naW5JZCI6InllZXVuZWUiLCJ0eXBlIjoiYWNjZXNzIiwianRpIjoiZTcwMGZjMTQtM2Y2MS00MTU4LWE0YWYtN2YzNTI3M2M3MDBhIiwiaWF0IjoxNzY0MTY5NjExLCJleHAiOjE3NjQxNzA1MTF9.H0EWDiZO9u5rNO7uF9w6RIQhcSdno5TGBMarWhdzP5A
@REFRESH = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWlkNGg5dnkwMDAwcGg0OG1jZmU0cnIyIiwibG9naW5JZCI6InllZXVuZWUiLCJ0eXBlIjoicmVmcmVzaCIsImp0aSI6ImY5M2MwODNmLTA2ZTItNDYwMy05N2YzLWNmZjc2OTA0NjVlMiIsImlhdCI6MTc2NDE2OTYxMSwiZXhwIjoxNzY1Mzc5MjExfQ.0mnj0eDQj_Nb-KMYnDZUkQF5LQR3hXIYygrvLqbbOnM
### Health Check
GET {{BASE}}/health

### Sign Up
POST {{BASE}}/api/auth/signup
Content-Type: application/json

{
  "loginId": "yeeunee",
  "password": "123456789!",
  "name": "김예은",
  "gender": "F",
  "phone": "010-3370-7588",
  "birthDate": "2004-02-12",
  "smsConsent": true,
  "termsConsent": true
}

### Login
POST {{BASE}}/api/auth/login
Content-Type: application/json

{
  "loginId": "yeeunee",
  "password": "123456789!"
}

### Get Profile
GET {{BASE}}/api/me
Authorization: Bearer {{ACCESS}}

### Update Profile (any subset of fields)
PATCH {{BASE}}/api/me
Authorization: Bearer {{ACCESS}}
Content-Type: application/json

{
  "name": "김예니",
  "phone": "010-7588-3370",
  "gender": "F",
  "birthDate": "2001-01-01"
}

### Refresh Tokens
POST {{BASE}}/api/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{REFRESH}}"
}

### Logout
POST {{BASE}}/api/auth/logout
Content-Type: application/json

{
  "refreshToken": "{{REFRESH}}"
}

### Change Password
PATCH {{BASE}}/api/me/password
Authorization: Bearer {{ACCESS}}
Content-Type: application/json

{
  "currentPassword": "123456789!",
  "newPassword": "987654321!"
}

### Social Login (Kakao)
POST {{BASE}}/api/auth/social/login
Content-Type: application/json

{
  "provider": "kakao",
  "code": "kakao_authorization_code_here",
  "redirectUri": "http://localhost:5173/auth/kakao/callback"
}

### Social Login (Google)
POST {{BASE}}/api/auth/social/login
Content-Type: application/json

{
  "provider": "google",
  "accessToken": "google_user_access_token_here"
}

### Complete Social Consent
POST {{BASE}}/api/auth/social/consent
Content-Type: application/json

{
  "pendingToken": "pending_token_from_login_response",
  "termsConsent": true,
  "smsConsent": false,
  "name": "소셜 사용자"
}


########################################################

### 방(ROOM) 도메인 테스트 (로컬 서버 기준)

########################################################



### 1. 방 생성 (로컬)

### - JWT는 위에서 로그인 해서 직접 복사해 넣기 (@JWT 갱신 필수!)

POST {{BASE}}/api/rooms
Authorization: Bearer {{JWT}}
Content-Type: application/json


{

  "title": "사이미",

  "departureLabel": "전북대 구정문",

  "departureLat": 35.846100,

  "departureLng": 127.129100,

  "arrivalLabel": "전주 시외버스터미널",

  "arrivalLat": 35.825000,

  "arrivalLng": 127.148000,

  "departureTime": "2025-11-20T15:30:00.000Z",

  "capacity": 4,

  "priority": "time",

  "estimatedFare": 12000

}



### ⚠ 방 생성 후, 응답 JSON에서 "id" 값을 복사해서

###    아래 @ROOM_ID 자리에 넣어줘야 해

@ROOM_ID = cmicun6po0001ngvnwhud00xq


### 2. 방 목록 조회 (전체)

GET {{BASE}}/api/rooms

Authorization: Bearer {{JWT}}



### 3. 방 검색 (출발지 필터 + 자리 남은 방만)

GET {{BASE}}/api/rooms?departureLabel=강남역&hasSeat=true

Authorization: Bearer {{JWT}}



### 4. 방 상세 조회

GET {{BASE}}/api/rooms/{{ROOM_ID}}

Authorization: Bearer {{JWT}}



### 5. 방 수정 (방장 계정으로만 테스트!)

PATCH {{BASE}}/api/rooms/{{ROOM_ID}}

Authorization: Bearer {{JWT}}

Content-Type: application/json



{

  "title": "전북대 → 고속버스터미널",

  "departureTime": "2025-11-20T16:00:00.000Z",

  "estimatedFare": 13000

}



########################################################

### 방 참여 / 나가기 테스트

########################################################



### 7. 방 참여 (좌석 선택)

### - 현재 로그인한 사용자(@JWT)로, 위에서 만든 ROOM_ID 방에 참여

POST {{BASE}}/api/rooms/{{ROOM_ID}}/join

Authorization: Bearer {{JWT}}

Content-Type: application/json



{

  "seatNumber": 4

}



### 8. 방 나가기

### - 바로 위에서 참여한 사용자가 방에서 나가기

POST {{BASE}}/api/rooms/{{ROOM_ID}}/leave

Authorization: Bearer {{JWT}}



########################################################

### 방 매칭(matchRooms) 테스트

########################################################



### 9. 매칭 테스트 - 현재 위치 기준 반경 3km 안, 좌석 1자리 이상 남은 open 방

GET {{BASE}}/api/rooms/match?departureLat=35.8461&departureLng=127.1291&radiusKm=3&seatsNeeded=1

Authorization: Bearer {{JWT}}



### 10. 매칭 테스트 - 시간 조건 포함 (오늘 ~ 내일)

GET {{BASE}}/api/rooms/match?departureLat=35.8461&departureLng=127.1291&radiusKm=3&seatsNeeded=1&earliest=2025-11-20T00:00:00.000Z&latest=2025-11-21T00:00:00.000Z

Authorization: Bearer {{JWT}}



########################################################

### 방 정렬(sortBy) 테스트

########################################################



### 11. 정렬 - 출발지 가까운 순

### - refLat/refLng에 현재 위치(또는 희망 출발지) 위도/경도 입력

GET {{BASE}}/api/rooms?sortBy=departureDistance&refLat=35.1796&refLng=129.0756

Authorization: Bearer {{JWT}}



### 12. 정렬 - 도착지 가까운 순

GET {{BASE}}/api/rooms?sortBy=arrivalDistance&refLat=35.1796&refLng=129.0756

Authorization: Bearer {{JWT}}



### 13. 정렬 - 출발 시간 가까운 순

GET {{BASE}}/api/rooms?sortBy=time

Authorization: Bearer {{JWT}}

### ?? ? ??
GET {{BASE}}/api/rooms/mine
Authorization: Bearer {{JWT}}




### 나의 방

### 나의 방 목록
GET {{BASE}}/api/rooms/mine
Authorization: Bearer {{JWT}}